{"version":3,"sources":["utils.js","WebAPI.js","contexts.js","pages/LoginPage/LoginPage.js","pages/HomePage/HomePage.js","component/Header/Header.js","pages/ArticlePage/ArticlePage.js","pages/RegisterPage/RegisterPage.js","pages/NewPostPage/NewPostPage.js","pages/AboutPage/AboutPage.js","component/App/App.js","reportWebVitals.js","index.js"],"names":["TOKEN_NAME","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","BASE_URL","getPosts","page","fetch","then","res","articleAmout","headers","get","json","amount","getMe","AuthContext","createContext","ErrorMessage","styled","div","Container","LoginPage","setUser","useContext","useState","username","setUsername","password","setPassword","errorMessage","setErrorMessage","history","useHistory","onSubmit","e","method","body","JSON","stringify","login","data","ok","message","response","toString","push","value","onChange","target","type","Root","PostContainer","PostTitle","Link","PostDate","Page","props","$active","PageContainer","PostDelete","PostRightContainer","Post","post","handleDelete","user","to","id","title","Date","createdAt","toLocaleString","onClick","HomePage","posts","setPosts","setAmount","pagination","setPage","currentPage","setCurrentPage","useEffect","arr","i","Math","ceil","authorization","deleteArticle","map","innerText","handlePage","HeaderContainer","Brand","NavbarList","Nav","LeftContainer","Header","location","useLocation","pathname","ArticlePage","useParams","setPost","getArticle","RegisterPage","nickname","setNickname","console","log","register","NewPostPage","setTitle","article","setArticle","payload","createPost","RightContainer","AboutPage","App","Provider","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ff0fbcee.chunk.js","sourcesContent":["const TOKEN_NAME = 'token'\n\nexport const setAuthToken = token => {\n  localStorage.setItem(TOKEN_NAME, token)\n}\nexport const getAuthToken = () => {\n  return localStorage.getItem(TOKEN_NAME)\n}","import { getAuthToken } from './utils'\nconst BASE_URL = 'https://student-json-api.lidemy.me'\n\nexport const getPosts = (page=1) => {\n  return fetch(`${BASE_URL}/posts?_sort=createdAt&_order=desc&_limit=5&_page=${page}`)\n  .then(res => {\n    let articleAmout = res.headers.get(\"x-total-count\");\n    return {res: res.json(), amount: articleAmout}\n  })\n  //.then(res => res.headers)\n\n}\nexport const login = (username, password) => {\n  return fetch(`${BASE_URL}/login`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  }).then(res => res.json())\n}\nexport const getMe = () => {\n  const token = getAuthToken()\n  return fetch(`${BASE_URL}/me`, {\n  headers: {\n    'authorization': `Bearer ${token}`\n  }\n})\n.then(res => res.json())\n}\nexport const getArticle = (id) => {\n  return fetch(`${BASE_URL}/posts?id=${id}`, {\n})\n.then(res => res.json())\n}\nexport const register = (username, password, nickname) => {\n  return fetch(`${BASE_URL}/register`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      username,\n      password,\n      nickname\n    })\n  }).then(res => res.json())\n}\nexport const createPost = (payload) => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/posts`, {\n    method: \"POST\",\n    headers: {\n      authorization: `Bearer ${token}`,\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify(payload),\n  }).then((res) => res.json());\n};\nexport const deleteArticle = (id) => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/posts/${id}`, {\n    method: 'DELETE',\n    headers: {\n      authorization: `Bearer ${token}`,\n      \"content-type\": \"application/json\",\n    },\n  })\n  .then(res => res.json())\n}\n\n\n","import { createContext } from 'react'\n\nexport const AuthContext = createContext(null)","\nimport React, { useState, useContext } from 'react';\nimport styled from 'styled-components';\nimport { useHistory } from \"react-router-dom\";\nimport { login, getMe } from '../../WebAPI'\nimport { setAuthToken } from '../../utils'\nimport { AuthContext } from '../../contexts';\nconst ErrorMessage = styled.div`\n  color: red;\n`\nconst Container = styled.div`\n  margin: 0 auto;\n  text-align: center;\n  margin-top: 80px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  max-width: 500px;\n  min-height: 200px;\n  box-shadow: 4px 4px 4px 4px rgba(0, 0, 0, 0.2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nexport default function LoginPage() {\n  const { setUser } = useContext(AuthContext)\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [errorMessage, setErrorMessage] = useState()\n  const history = useHistory()\n  const handleSubmit = e => {\n    setErrorMessage(null)\n    login(username, password).then(data => {\n      if(data.ok === 0){\n        return setErrorMessage(data.message)\n      }\n      setAuthToken(data.token)\n      getMe().then(response => {\n        if(response.ok !== 1) {\n          setAuthToken(null)\n          return setErrorMessage(response.toString())\n        }\n        setUser(response.data)\n        history.push(\"/\")\n      })\n\n    })\n  }\n  return (\n    <Container>\n      <form onSubmit={handleSubmit}>\n      <div>\n        帳號：<input value={username} onChange={e => setUsername(e.target.value)}/>\n      </div>\n      <div>\n        密碼：<input type=\"password\" value={password} onChange={e => setPassword(e.target.value)}/>\n      </div>\n      <button>登入</button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </form>\n    </Container>\n    \n  );\n}\n","\n\nimport styled from 'styled-components';\nimport { Link } from \"react-router-dom\";\nimport { getPosts, deleteArticle } from '../../WebAPI'\nimport { useEffect, useState, useContext } from 'react';\nimport { AuthContext } from '../../contexts'\n\nconst Root = styled.div`\n  width: 85%;\n  margin: 0 auto;\n`\nconst PostContainer = styled.div`\n  border-bottom: 1px solid rgba(o, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n`\nconst PostTitle = styled(Link)`\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n`\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.8);\n`\nconst Page = styled.div`\n  display: inline-block;\n  border: 1px solid black;\n  margin-right: 5px;\n  padding: 5px;\n  cursor: pointer;\n  ${props => props.$active && \n    `\n      background: rgba(0, 0, 0, 0.1);\n      font-weight: bold;\n    `}\n`\nconst PageContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 80px;\n`\nconst PostDelete = styled(Link)`\n  color: black;\n  text-decoration: none;\n`\nconst PostRightContainer = styled.div`\n  \n`\nfunction Post({ post, handleDelete, user }) {\n  return (\n    <PostContainer>\n      <PostTitle to={`/posts/${post.id}`}>{post.title}</PostTitle>\n      <PostRightContainer>\n        <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n        {user && <PostDelete to=\"\" onClick={() => handleDelete(post.id)}>刪除</PostDelete>}\n      </PostRightContainer>\n    </PostContainer>\n  )\n}\nexport default function HomePage() {\n  const [posts, setPosts] = useState([])\n  const [amount, setAmount] = useState(0)\n  const [pagination, setPage] = useState([])\n  const [currentPage, setCurrentPage] = useState(\"1\")\n  const { user } = useContext(AuthContext)\n  useEffect(() => {\n    getPosts()\n    .then(\n      posts => {\n        setAmount(posts.amount)\n        return posts.res\n      }\n    ).then(\n      posts => setPosts(posts)\n    )\n  }, [])\n  useEffect(() => {\n    let arr = []\n    for(let i=1; i<=Math.ceil(amount/5); i++){\n      arr.push(i)\n    }\n    setPage(arr)\n  }, [amount])\n\n  const handlePage = (e) => {\n    let page = e.target.innerText\n    setCurrentPage(page)\n    getPosts(page)\n    .then(\n      posts => {\n        setAmount(posts.amount)\n        return posts.res\n      }\n    ).then(\n      posts => setPosts(posts)\n    )\n  }\n  const handleDelete = (id) => {\n    deleteArticle(id)\n    .then(\n      posts => {\n        getPosts(currentPage)\n        .then(\n          posts => {\n            setAmount(posts.amount)\n            return posts.res\n          }\n        ).then(\n          posts => setPosts(posts)\n        )\n      }\n    )\n  }\n  return (\n    <Root>\n      {posts.map(post => <Post user={user} handleDelete={handleDelete} key={post.id} post={post} />)}\n      <PageContainer>\n      {pagination.map(page =>\n          <Page key={page} value={page} $active={currentPage === page.toLocaleString()} onClick={(e) => {handlePage(e)}}>{page}</Page>\n      )}\n      </PageContainer> \n    </Root>\n  );\n}\n","import React, { useContext } from 'react'\n\nimport styled from 'styled-components'\nimport { Link, useLocation, useHistory } from \"react-router-dom\"\nimport { AuthContext } from '../../contexts'\nimport { setAuthToken } from '../../utils'\nconst HeaderContainer = styled.div`\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0px 32px;\n`\nconst Brand = styled.div`\n  font-size: 32px;\n  font-weight: bold;\n`\nconst NavbarList = styled.div`\n  display: flex;\n  align-items: center;\n  height: 100%;\n`\nconst Nav = styled(Link)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n  ${props => props.$active && \n  `\n    background: rgba(0, 0, 0, 0.1)\n  `}\n`\nconst LeftContainer = styled.div`\n  display: flex;\n  align-items: center;\n  height: 100%;\n  ${NavbarList} {\n    margin-left: 32px;\n  }\n`\nexport default function Header() {\n  const location = useLocation()\n  const history = useHistory()\n  const { user, setUser } = useContext(AuthContext)\n  const handleLogout = () => {\n    setAuthToken('')\n    setUser(null)\n    if (location.pathname !== '/') {\n      history.push('/')\n    }\n\n  }\n  return (\n    <HeaderContainer>\n      <LeftContainer>\n        <Brand>我的第一個部落格</Brand>\n        <NavbarList>\n          <Nav to=\"/\" $active={location.pathname === '/'}>首頁</Nav>\n          <Nav to=\"/about\" $active={location.pathname === '/about'}>About</Nav>\n          {user && <Nav to=\"/new-post\" $active={location.pathname === '/new-post'}>發布文章</Nav>}\n        </NavbarList>\n      </LeftContainer>\n      <NavbarList>\n      {!user &&<Nav to=\"/register\" $active={location.pathname === '/register'}>註冊</Nav>}\n        {!user && <Nav to=\"/login\" $active={location.pathname === '/login'}>登入</Nav>}\n        {user && <Nav to=\"\" onClick={handleLogout}>登出</Nav>}\n      </NavbarList>\n    </HeaderContainer>\n  );\n}\n","\n\nimport styled from 'styled-components';\nimport { useParams} from \"react-router-dom\";\nimport { getArticle } from '../../WebAPI'\nimport { useEffect, useState } from 'react';\n\nconst Root = styled.div`\n  width: 80%;\n  margin: 0 auto;\n  margin-top: 40px;\n  line-height: 1.5;\n`;\n\nexport default function ArticlePage() {\n  let { id } = useParams();\n  const [post, setPost] = useState(\"\")\n  useEffect(() => {\n    getArticle(id).then(res => setPost(res[0].body))\n  }, [id])\n  return (\n    <Root>\n      <div>{post}</div>\n    </Root>\n  );\n}\n","\nimport React, { useState, useContext } from 'react';\nimport styled from 'styled-components';\nimport { useHistory } from \"react-router-dom\";\nimport { getMe, register } from '../../WebAPI'\nimport { setAuthToken } from '../../utils'\nimport { AuthContext } from '../../contexts';\nconst ErrorMessage = styled.div`\n  color: red;\n`\nconst Container = styled.div`\n  margin: 0 auto;\n  text-align: center;\n  margin-top: 80px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  max-width: 500px;\n  min-height: 200px;\n  box-shadow: 4px 4px 4px 4px rgba(0, 0, 0, 0.2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nexport default function RegisterPage() {\n  const { setUser } = useContext(AuthContext)\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [nickname, setNickname] = useState(\"\")\n  const [errorMessage, setErrorMessage] = useState()\n  const history = useHistory()\n  const handleSubmit = e => {\n    setErrorMessage(null)\n    console.log(username, password, nickname)\n    register(username, password, nickname).then(data => {\n      console.log(data)\n      if(data.ok === 0){\n        return setErrorMessage(data.message)\n      }\n      setAuthToken(data.token)\n      getMe().then(response => {\n        if(response.ok !== 1) {\n          setAuthToken(null)\n          return setErrorMessage(response.toString())\n        }\n        setUser(response.data)\n        history.push(\"/\")\n      })\n\n    })\n  }\n  return (\n    <Container>\n      <form onSubmit={handleSubmit}>\n      <div>\n        帳號： <input value={username} onChange={e => setUsername(e.target.value)}/>\n      </div>\n      <div>\n        密碼： <input type=\"password\" value={password} onChange={e => setPassword(e.target.value)}/>\n      </div>\n      <div>\n        暱稱： <input value={nickname} onChange={e => setNickname(e.target.value)}/>\n      </div>\n      <button>註冊</button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </form>\n    </Container>\n    \n  );\n}\n","\n\nimport styled from 'styled-components';\nimport { useHistory} from \"react-router-dom\";\nimport { createPost } from '../../WebAPI'\nimport { useState } from 'react';\nconst ErrorMessage = styled.div`\n  color: red;\n`\nconst Root = styled.div`\n  width: 80%;\n  margin: 0 auto;\n  margin-top: 40px;\n  line-height: 1.5;\n`\nconst Container = styled.div`\n  margin: 0 auto;\n  text-align: center;\n  margin-top: 80px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  max-width: 800px;\n  min-height: 70vh;\n  box-shadow: 4px 4px 4px 4px rgba(0, 0, 0, 0.2);\n  margin-bottom: 40px;\n  textarea{\n    height: 300px;\n    width: 80%;\n    margin-top: 20px;\n  }\n  input{\n    margin-top: 40px;\n    width: 80%\n  }\n`\nexport default function NewPostPage() {\n  const [title, setTitle] = useState(\"\")\n  const [article, setArticle] = useState(\"\")\n  const [errorMessage, setErrorMessage] = useState()\n  const history = useHistory()\n  const handleSubmit = () => {\n    createPost({title: title, body: article}).then(data => {\n      if(data.ok === 0){\n        return setErrorMessage(data.message)\n      }\n      history.push(\"/\")\n\n    })\n  }\n  return (\n    <Root>\n      <Container>\n      <form onSubmit={handleSubmit}>\n        <div>\n          標題：<input value={title} onChange={e => setTitle(e.target.value)}/>\n        </div>\n        <div>\n        內容：<textarea value={article} onChange={e => setArticle(e.target.value)} />\n        </div>\n\n        <button>送出</button>\n        <ErrorMessage>{errorMessage}</ErrorMessage>\n      </form>\n      </Container>\n      \n    </Root>\n  );\n}\n","\n\nimport styled from 'styled-components';\n\nconst Root = styled.div`\n  width: 60%;\n  margin: 0 auto;\n  margin-top: 5%;\n`\nconst RightContainer = styled.div`\n  margin-top: 20%;\n  text-align: right;\n`\n\nexport default function AboutPage() {\n\n  return (\n    <Root>\n      <p>啦啦啦~~~ React 接 API BLOG~~~~</p>\n      <p>不想排版~~~~~</p>\n      <p>好累~~~~~</p>\n      <RightContainer>\n      <p>還是稍微排一下好了</p>\n      <p>不知道怎麼排</p>\n      <p>這樣看起來好像很文青</p>\n      </RightContainer>\n    </Root>\n  );\n}\n","\n\nimport styled from 'styled-components'\nimport LoginPage from '../../pages/LoginPage'\nimport HomePage from '../../pages/HomePage'\nimport Header from \"../Header/Header\"\nimport ArticlePage from \"../../pages/ArticlePage\"\nimport RegisterPage from \"../../pages/RegisterPage\"\nimport NewPostPage from \"../../pages/NewPostPage\"\nimport AboutPage from \"../../pages/AboutPage\"\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from \"react-router-dom\"\nimport { useEffect, useState } from 'react'\nimport { AuthContext } from '../../contexts'\nimport { getMe } from '../../WebAPI'\nimport { getAuthToken } from '../../utils'\nconst Root = styled.div`\n  padding-top: 64px;\n`\nfunction App() {\n  const [user, setUser] = useState(null)\n  useEffect(() => {\n    let token = getAuthToken()\n    if (token) {\n      getMe().then(response => {\n        if (response.ok) {\n          setUser(response.data)\n        }\n      })\n    } \n  }, [])\n\n  return (\n    <AuthContext.Provider value={{user, setUser}}>\n    <Root>\n      <Router>\n        <Header />\n          <Switch>\n            <Route exact path=\"/\">\n              <HomePage />\n            </Route>\n            <Route exact path=\"/login\">\n              <LoginPage />\n            </Route>\n            <Route exact path=\"/posts/:id\">\n              <ArticlePage />\n            </Route>\n            <Route exact path=\"/register\">\n              <RegisterPage />\n            </Route>\n            <Route exact path=\"/new-post\">\n              {user ? <NewPostPage /> : <Redirect to=\"/login\" />}\n            </Route>\n            <Route exact path=\"/about\">\n              <AboutPage />\n            </Route>\n          </Switch>\n      </Router>\n    </Root>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './component/App/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}