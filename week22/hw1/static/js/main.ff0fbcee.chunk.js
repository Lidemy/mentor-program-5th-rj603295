(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{28:function(t,e,n){},36:function(t,e,n){"use strict";n.r(e);var c,i,r=n(0),a=n.n(r),o=n(20),s=n.n(o),j=(n(28),n(4)),u=n(2),b=n(3),d=n(5),l="token",h=function(t){localStorage.setItem(l,t)},x=function(){return localStorage.getItem(l)},O="https://student-json-api.lidemy.me",p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return fetch("".concat(O,"/posts?_sort=createdAt&_order=desc&_limit=5&_page=").concat(t)).then((function(t){var e=t.headers.get("x-total-count");return{res:t.json(),amount:e}}))},f=function(){var t=x();return fetch("".concat(O,"/me"),{headers:{authorization:"Bearer ".concat(t)}}).then((function(t){return t.json()}))},g=Object(r.createContext)(null),v=n(1),m=b.a.div(c||(c=Object(u.a)(["\n  color: red;\n"]))),y=b.a.div(i||(i=Object(u.a)(["\n  margin: 0 auto;\n  text-align: center;\n  margin-top: 80px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  max-width: 500px;\n  min-height: 200px;\n  box-shadow: 4px 4px 4px 4px rgba(0, 0, 0, 0.2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));function S(){var t=Object(r.useContext)(g).setUser,e=Object(r.useState)(""),n=Object(j.a)(e,2),c=n[0],i=n[1],a=Object(r.useState)(""),o=Object(j.a)(a,2),s=o[0],u=o[1],b=Object(r.useState)(),l=Object(j.a)(b,2),x=l[0],p=l[1],S=Object(d.g)();return Object(v.jsx)(y,{children:Object(v.jsxs)("form",{onSubmit:function(e){p(null),function(t,e){return fetch("".concat(O,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:e})}).then((function(t){return t.json()}))}(c,s).then((function(e){if(0===e.ok)return p(e.message);h(e.token),f().then((function(e){if(1!==e.ok)return h(null),p(e.toString());t(e.data),S.push("/")}))}))},children:[Object(v.jsxs)("div",{children:["\u5e33\u865f\uff1a",Object(v.jsx)("input",{value:c,onChange:function(t){return i(t.target.value)}})]}),Object(v.jsxs)("div",{children:["\u5bc6\u78bc\uff1a",Object(v.jsx)("input",{type:"password",value:s,onChange:function(t){return u(t.target.value)}})]}),Object(v.jsx)("button",{children:"\u767b\u5165"}),x&&Object(v.jsx)(m,{children:x})]})})}var w,k,C,E,$,P,T,z,B,L,D,I,J,A=n(10),F=b.a.div(w||(w=Object(u.a)(["\n  width: 85%;\n  margin: 0 auto;\n"]))),U=b.a.div(k||(k=Object(u.a)(["\n  border-bottom: 1px solid rgba(o, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]))),_=Object(b.a)(A.b)(C||(C=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]))),N=b.a.div(E||(E=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]))),M=b.a.div($||($=Object(u.a)(["\n  display: inline-block;\n  border: 1px solid black;\n  margin-right: 5px;\n  padding: 5px;\n  cursor: pointer;\n  ","\n"])),(function(t){return t.$active&&"\n      background: rgba(0, 0, 0, 0.1);\n      font-weight: bold;\n    "})),G=b.a.div(P||(P=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: 80px;\n"]))),R=Object(b.a)(A.b)(T||(T=Object(u.a)(["\n  color: black;\n  text-decoration: none;\n"]))),q=b.a.div(z||(z=Object(u.a)(["\n  \n"])));function H(t){var e=t.post,n=t.handleDelete,c=t.user;return Object(v.jsxs)(U,{children:[Object(v.jsx)(_,{to:"/posts/".concat(e.id),children:e.title}),Object(v.jsxs)(q,{children:[Object(v.jsx)(N,{children:new Date(e.createdAt).toLocaleString()}),c&&Object(v.jsx)(R,{to:"",onClick:function(){return n(e.id)},children:"\u522a\u9664"})]})]})}function K(){var t=Object(r.useState)([]),e=Object(j.a)(t,2),n=e[0],c=e[1],i=Object(r.useState)(0),a=Object(j.a)(i,2),o=a[0],s=a[1],u=Object(r.useState)([]),b=Object(j.a)(u,2),d=b[0],l=b[1],h=Object(r.useState)("1"),f=Object(j.a)(h,2),m=f[0],y=f[1],S=Object(r.useContext)(g).user;Object(r.useEffect)((function(){p().then((function(t){return s(t.amount),t.res})).then((function(t){return c(t)}))}),[]),Object(r.useEffect)((function(){for(var t=[],e=1;e<=Math.ceil(o/5);e++)t.push(e);l(t)}),[o]);var w=function(t){(function(t){var e=x();return fetch("".concat(O,"/posts/").concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e),"content-type":"application/json"}}).then((function(t){return t.json()}))})(t).then((function(t){p(m).then((function(t){return s(t.amount),t.res})).then((function(t){return c(t)}))}))};return Object(v.jsxs)(F,{children:[n.map((function(t){return Object(v.jsx)(H,{user:S,handleDelete:w,post:t},t.id)})),Object(v.jsx)(G,{children:d.map((function(t){return Object(v.jsx)(M,{value:t,$active:m===t.toLocaleString(),onClick:function(t){!function(t){var e=t.target.innerText;y(e),p(e).then((function(t){return s(t.amount),t.res})).then((function(t){return c(t)}))}(t)},children:t},t)}))})]})}var Q,V=b.a.div(B||(B=Object(u.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0px 32px;\n"]))),W=b.a.div(L||(L=Object(u.a)(["\n  font-size: 32px;\n  font-weight: bold;\n"]))),X=b.a.div(D||(D=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 100%;\n"]))),Y=Object(b.a)(A.b)(I||(I=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n  ","\n"])),(function(t){return t.$active&&"\n    background: rgba(0, 0, 0, 0.1)\n  "})),Z=b.a.div(J||(J=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 100%;\n  "," {\n    margin-left: 32px;\n  }\n"])),X);function tt(){var t=Object(d.h)(),e=Object(d.g)(),n=Object(r.useContext)(g),c=n.user,i=n.setUser;return Object(v.jsxs)(V,{children:[Object(v.jsxs)(Z,{children:[Object(v.jsx)(W,{children:"\u6211\u7684\u7b2c\u4e00\u500b\u90e8\u843d\u683c"}),Object(v.jsxs)(X,{children:[Object(v.jsx)(Y,{to:"/",$active:"/"===t.pathname,children:"\u9996\u9801"}),Object(v.jsx)(Y,{to:"/about",$active:"/about"===t.pathname,children:"About"}),c&&Object(v.jsx)(Y,{to:"/new-post",$active:"/new-post"===t.pathname,children:"\u767c\u5e03\u6587\u7ae0"})]})]}),Object(v.jsxs)(X,{children:[!c&&Object(v.jsx)(Y,{to:"/register",$active:"/register"===t.pathname,children:"\u8a3b\u518a"}),!c&&Object(v.jsx)(Y,{to:"/login",$active:"/login"===t.pathname,children:"\u767b\u5165"}),c&&Object(v.jsx)(Y,{to:"",onClick:function(){h(""),i(null),"/"!==t.pathname&&e.push("/")},children:"\u767b\u51fa"})]})]})}var et,nt,ct=b.a.div(Q||(Q=Object(u.a)(["\n  width: 80%;\n  margin: 0 auto;\n  margin-top: 40px;\n  line-height: 1.5;\n"])));function it(){var t=Object(d.i)().id,e=Object(r.useState)(""),n=Object(j.a)(e,2),c=n[0],i=n[1];return Object(r.useEffect)((function(){(function(t){return fetch("".concat(O,"/posts?id=").concat(t),{}).then((function(t){return t.json()}))})(t).then((function(t){return i(t[0].body)}))}),[t]),Object(v.jsx)(ct,{children:Object(v.jsx)("div",{children:c})})}var rt,at,ot,st=b.a.div(et||(et=Object(u.a)(["\n  color: red;\n"]))),jt=b.a.div(nt||(nt=Object(u.a)(["\n  margin: 0 auto;\n  text-align: center;\n  margin-top: 80px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  max-width: 500px;\n  min-height: 200px;\n  box-shadow: 4px 4px 4px 4px rgba(0, 0, 0, 0.2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));function ut(){var t=Object(r.useContext)(g).setUser,e=Object(r.useState)(""),n=Object(j.a)(e,2),c=n[0],i=n[1],a=Object(r.useState)(""),o=Object(j.a)(a,2),s=o[0],u=o[1],b=Object(r.useState)(""),l=Object(j.a)(b,2),x=l[0],p=l[1],m=Object(r.useState)(),y=Object(j.a)(m,2),S=y[0],w=y[1],k=Object(d.g)();return Object(v.jsx)(jt,{children:Object(v.jsxs)("form",{onSubmit:function(e){w(null),console.log(c,s,x),function(t,e,n){return fetch("".concat(O,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:e,nickname:n})}).then((function(t){return t.json()}))}(c,s,x).then((function(e){if(console.log(e),0===e.ok)return w(e.message);h(e.token),f().then((function(e){if(1!==e.ok)return h(null),w(e.toString());t(e.data),k.push("/")}))}))},children:[Object(v.jsxs)("div",{children:["\u5e33\u865f\uff1a ",Object(v.jsx)("input",{value:c,onChange:function(t){return i(t.target.value)}})]}),Object(v.jsxs)("div",{children:["\u5bc6\u78bc\uff1a ",Object(v.jsx)("input",{type:"password",value:s,onChange:function(t){return u(t.target.value)}})]}),Object(v.jsxs)("div",{children:["\u66b1\u7a31\uff1a ",Object(v.jsx)("input",{value:x,onChange:function(t){return p(t.target.value)}})]}),Object(v.jsx)("button",{children:"\u8a3b\u518a"}),S&&Object(v.jsx)(st,{children:S})]})})}var bt,dt,lt=b.a.div(rt||(rt=Object(u.a)(["\n  color: red;\n"]))),ht=b.a.div(at||(at=Object(u.a)(["\n  width: 80%;\n  margin: 0 auto;\n  margin-top: 40px;\n  line-height: 1.5;\n"]))),xt=b.a.div(ot||(ot=Object(u.a)(["\n  margin: 0 auto;\n  text-align: center;\n  margin-top: 80px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  max-width: 800px;\n  min-height: 70vh;\n  box-shadow: 4px 4px 4px 4px rgba(0, 0, 0, 0.2);\n  margin-bottom: 40px;\n  textarea{\n    height: 300px;\n    width: 80%;\n    margin-top: 20px;\n  }\n  input{\n    margin-top: 40px;\n    width: 80%\n  }\n"])));function Ot(){var t=Object(r.useState)(""),e=Object(j.a)(t,2),n=e[0],c=e[1],i=Object(r.useState)(""),a=Object(j.a)(i,2),o=a[0],s=a[1],u=Object(r.useState)(),b=Object(j.a)(u,2),l=b[0],h=b[1],p=Object(d.g)();return Object(v.jsx)(ht,{children:Object(v.jsx)(xt,{children:Object(v.jsxs)("form",{onSubmit:function(){(function(t){var e=x();return fetch("".concat(O,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(e),"content-type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()}))})({title:n,body:o}).then((function(t){if(0===t.ok)return h(t.message);p.push("/")}))},children:[Object(v.jsxs)("div",{children:["\u6a19\u984c\uff1a",Object(v.jsx)("input",{value:n,onChange:function(t){return c(t.target.value)}})]}),Object(v.jsxs)("div",{children:["\u5167\u5bb9\uff1a",Object(v.jsx)("textarea",{value:o,onChange:function(t){return s(t.target.value)}})]}),Object(v.jsx)("button",{children:"\u9001\u51fa"}),Object(v.jsx)(lt,{children:l})]})})})}var pt,ft=b.a.div(bt||(bt=Object(u.a)(["\n  width: 60%;\n  margin: 0 auto;\n  margin-top: 5%;\n"]))),gt=b.a.div(dt||(dt=Object(u.a)(["\n  margin-top: 20%;\n  text-align: right;\n"])));function vt(){return Object(v.jsxs)(ft,{children:[Object(v.jsx)("p",{children:"\u5566\u5566\u5566~~~ React \u63a5 API BLOG~~~~"}),Object(v.jsx)("p",{children:"\u4e0d\u60f3\u6392\u7248~~~~~"}),Object(v.jsx)("p",{children:"\u597d\u7d2f~~~~~"}),Object(v.jsxs)(gt,{children:[Object(v.jsx)("p",{children:"\u9084\u662f\u7a0d\u5fae\u6392\u4e00\u4e0b\u597d\u4e86"}),Object(v.jsx)("p",{children:"\u4e0d\u77e5\u9053\u600e\u9ebc\u6392"}),Object(v.jsx)("p",{children:"\u9019\u6a23\u770b\u8d77\u4f86\u597d\u50cf\u5f88\u6587\u9752"})]})]})}var mt=b.a.div(pt||(pt=Object(u.a)(["\n  padding-top: 64px;\n"])));var yt=function(){var t=Object(r.useState)(null),e=Object(j.a)(t,2),n=e[0],c=e[1];return Object(r.useEffect)((function(){x()&&f().then((function(t){t.ok&&c(t.data)}))}),[]),Object(v.jsx)(g.Provider,{value:{user:n,setUser:c},children:Object(v.jsx)(mt,{children:Object(v.jsxs)(A.a,{children:[Object(v.jsx)(tt,{}),Object(v.jsxs)(d.d,{children:[Object(v.jsx)(d.b,{exact:!0,path:"/",children:Object(v.jsx)(K,{})}),Object(v.jsx)(d.b,{exact:!0,path:"/login",children:Object(v.jsx)(S,{})}),Object(v.jsx)(d.b,{exact:!0,path:"/posts/:id",children:Object(v.jsx)(it,{})}),Object(v.jsx)(d.b,{exact:!0,path:"/register",children:Object(v.jsx)(ut,{})}),Object(v.jsx)(d.b,{exact:!0,path:"/new-post",children:n?Object(v.jsx)(Ot,{}):Object(v.jsx)(d.a,{to:"/login"})}),Object(v.jsx)(d.b,{exact:!0,path:"/about",children:Object(v.jsx)(vt,{})})]})]})})})},St=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),c(t),i(t),r(t),a(t)}))};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(yt,{})}),document.getElementById("root")),St()}},[[36,1,2]]]);
//# sourceMappingURL=main.ff0fbcee.chunk.js.map